{"version":3,"sources":["../../../src/js/components/Tabs.js"],"names":["length","indexOf","replace","split","state","showingPlus","mouseOver","handleBarClick","stopPropagation","props","createTab","handleTabClick","preventDefault","setActiveTab","handleRemoveClick","removeTab","id","removePlus","setState","showPlus","style","active","context","instances","map","index","instance","summary","promptPrefix","maximise","maxWidth","displayName","propTypes","object","string","func","defaultProps","contextTypes","array","bool"],"mappings":"25BAGA,aAA6B,8DAAJ,EAAI,CACvB,EAAoB,CAAb,GAAIA,MAAJ,IAAoB,EAAI,EAAIA,MAAJ,CAAa,CAAjB,CAApB,CAA4C,EAD5B,CAK3B,MAHiC,EAA7B,KAAKC,OAAL,QAGJ,GAFE,EAAO,MAET,EAAO,EAAKC,OAAL,QAAyB,EAAzB,EAA6BC,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,CACR,C,wrBAsBCC,K,CAAQ,CACNC,cADM,CAENC,YAFM,C,GAKRC,c,CAAiB,WAAO,CACtB,EAAEC,eAAF,EADsB,CAEtB,EAAKC,KAAL,CAAWC,SAAX,EACD,C,GAGDC,c,CAAiB,aAAc,CAC7B,EAAEC,cAAF,EAD6B,CAE7B,EAAEJ,eAAF,EAF6B,CAG7B,EAAKC,KAAL,CAAWI,YAAX,GACD,C,GAGDC,iB,CAAoB,eAAwB,CAI1C,MAHA,GAAEF,cAAF,EAGA,CAFA,EAAEJ,eAAF,EAEA,CADA,EAAKC,KAAL,CAAWM,SAAX,GAA4B,EAASN,KAAT,CAAeO,EAA3C,CACA,GACD,C,GAEDC,U,CAAa,UAAM,CACb,EAAKb,KAAL,CAAWC,WADE,EAEf,EAAKa,QAAL,CAAc,CAAEb,cAAF,CAAd,CAEH,C,GAEDc,Q,CAAW,UAAM,CACV,EAAKf,KAAL,CAAWC,WADD,EAEb,EAAKa,QAAL,CAAc,CAAEb,cAAF,CAAd,CAEH,C,4DAEQ,cACiB,KAAKD,KADtB,CACCC,WADD,GAEmB,KAAKI,KAFxB,KAECW,KAFD,KAEQC,MAFR,CAGD,EAAO,KAAKC,OAAL,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,WAAyB,SAAtBC,KAAsB,KAAfC,QAAe,CACzD,EAAS,GAAY,EAAStB,KAAtB,CAA+B,EAAK,EAASA,KAAT,CAAeuB,OAApB,CAA6B,EAASvB,KAAT,CAAewB,YAA5C,CAA/B,CAA2F,MAD1C,CAE/D,MACE,gCACE,KADF,CAEE,0BAA0B,MAAmB,sBAAnB,CAA4C,EAAtE,CAFF,CAGE,QAAS,kBAAK,GAAKjB,cAAL,KAAL,CAHX,CAIE,QAAS,kBAAK,GAAKA,cAAL,KAAL,CAJX,CAKE,OALF,CAME,SAAU,CANZ,EAQmC,CAAhC,GAAKW,OAAL,CAAaC,SAAb,CAAuBvB,MAAvB,EACC,+BACE,UAAU,oBADZ,CAEE,MAAM,WAFR,CAGE,YAAa,kBAAK,GAAKc,iBAAL,OAAL,CAHf,MATJ,GAkBH,CArBY,CAHN,CA0BP,MACE,gCACE,aAEM,KAAKQ,OAAL,CAAaO,QAAb,CAAwB,CAAEC,SAAU,MAAZ,CAAxB,GAFN,CADF,CAKE,UAAU,kBALZ,IAQE,+BACE,UAAU,wBADZ,CAEE,aAAc,KAAKX,QAFrB,CAGE,aAAc,KAAKF,UAHrB,EAKE,+BACE,+BAA+B,EAAc,4BAAd,CAA6C,EAA5E,CADF,CAEE,QAAS,KAAKV,cAFhB,MALF,CARF,CAoBH,C,sBAvGMwB,W,CAAc,M,GAEdC,S,CAAY,CACjBZ,MAAO,UAAUa,MADA,CAEjBZ,OAAQ,UAAUa,MAFD,CAGjBrB,aAAc,UAAUsB,IAHP,CAIjBpB,UAAW,UAAUoB,IAJJ,CAKjBzB,UAAW,UAAUyB,IALJ,C,GAQZC,Y,CAAe,CACpBhB,QADoB,C,GAIfiB,Y,CAAe,CACpBd,UAAW,UAAUe,KADD,CAEpBT,SAAU,UAAUU,IAFA,C","file":"Tabs.js","sourcesContent":["import React, { Component } from 'react'; // eslint-disable-line\nimport PropTypes from 'prop-types';\n\nfunction last(arr, pre = '') {\n  let base = arr.length > 2 ? `${arr[arr.length - 2]}` : '';\n  if (base.indexOf(`${pre}> `) !== 0) {\n    base = 'bash';\n  }\n  return base.replace(`${pre}> `, '').split(' ')[0];\n}\n\nclass Tabs extends Component {\n  static displayName = 'Tabs';\n\n  static propTypes = {\n    style: PropTypes.object, // eslint-disable-line\n    active: PropTypes.string,\n    setActiveTab: PropTypes.func,\n    removeTab: PropTypes.func,\n    createTab: PropTypes.func,\n  };\n\n  static defaultProps = {\n    style: {},\n  };\n\n  static contextTypes = {\n    instances: PropTypes.array,\n    maximise: PropTypes.bool,\n  };\n\n  state = {\n    showingPlus: false,\n    mouseOver: false,\n  };\n\n  handleBarClick = (e) => {\n    e.stopPropagation();\n    this.props.createTab();\n  };\n\n  // handle clicking a tab\n  handleTabClick = (e, index) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.setActiveTab(index);\n  };\n\n  // handle remove clicked\n  handleRemoveClick = (e, index, instance) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.removeTab(index, instance.props.id);\n    return false;\n  };\n\n  removePlus = () => {\n    if (this.state.showingPlus) {\n      this.setState({ showingPlus: false });\n    }\n  }\n\n  showPlus = () => {\n    if (!this.state.showingPlus) {\n      this.setState({ showingPlus: true });\n    }\n  }\n\n  render() {\n    const { showingPlus } = this.state;\n    const { style, active } = this.props;\n    const tabs = this.context.instances.map(({ index, instance }) => {\n      const title = (instance && instance.state) ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\n      return (\n        <div\n          key={index}\n          className={`terminal-tab${active === index ? ' terminal-tab-active' : ''}`}\n          onClick={e => this.handleTabClick(e, index)}\n          onFocus={e => this.handleTabClick(e, index)}\n          title={title}\n          tabIndex={0}\n        >\n          {this.context.instances.length > 1 && (\n            <div\n              className=\"terminal-tab-close\"\n              title=\"Close Tab\"\n              onMouseDown={e => this.handleRemoveClick(e, index, instance)}\n            >x</div>\n          ) }\n          {title}\n        </div>\n      );\n    });\n\n    return (\n      <div\n        style={{\n          ...style,\n          ...(this.context.maximise ? { maxWidth: '100%' } : {}),\n        }}\n        className=\"terminal-tab-bar\"\n      >\n        {tabs}\n        <div\n          className=\"terminal-tab-bar-empty\"\n          onMouseEnter={this.showPlus}\n          onMouseLeave={this.removePlus}\n        >\n          <div\n            className={`terminal-tab-plus${showingPlus ? ' terminal-tab-plus-visible' : ''}`}\n            onClick={this.handleBarClick}\n          >+</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Tabs;\n"]}